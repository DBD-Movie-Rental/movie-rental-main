openapi: 3.0.3
info:
  title: Movie Rental API
  version: 1.0.0
servers:
- url: http://127.0.0.1:5004
  description: Local dev
tags:
- name: MySQL
  description: All MySQL CRUD endpoints
- name: MongoDB
  description: All MongoDB CRUD endpoints
- name: Neo4j
  description: All Neo4j CRUD endpoints
paths:
  /api/v1/mysql/health:
    get:
      tags:
      - MySQL
      summary: MySQL health
      responses:
        '200':
          description: OK
  /api/v1/mongodb/health:
    get:
      tags:
      - MongoDB
      summary: MongoDB health
      responses:
        '200':
          description: OK
  /api/v1/mongodb/customers:
    get:
      tags:
      - MongoDB
      summary: List customers (flat, MySQL-like shape)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/customers/detailed:
    get:
      tags:
      - MongoDB
      summary: List customers with embedded address + membership + recent rentals
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoCustomerDetailed'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/customers/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get customer by id (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/customers/{id}/details:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get customer by id (with embedded details)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MongoCustomerDetailed'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/movies:
    get:
      tags:
      - MongoDB
      summary: List movies (flat, MySQL-like shape)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Movie'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/movies/detailed:
    get:
      tags:
      - MongoDB
      summary: List movies with embedded reviews + genres array
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoMovieDetailed'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/movies/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get movie by id (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/movies/{id}/details:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get movie by id (with embedded details)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MongoMovieDetailed'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/locations:
    get:
      tags:
      - MongoDB
      summary: List locations (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Location'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/locations/detailed:
    get:
      tags:
      - MongoDB
      summary: List locations with embedded employees + inventory items
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoLocationDetailed'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/locations/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get location by id (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/locations/{id}/details:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get location by id (with embedded employees + inventory)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MongoLocationDetailed'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/rentals:
    get:
      tags:
      - MongoDB
      summary: List rentals (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Rental'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/rentals/detailed:
    get:
      tags:
      - MongoDB
      summary: List rentals with items, payments, fees and promo snapshot
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoRentalDetailed'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/rentals/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get rental by id (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rental'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/rentals/{id}/details:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get rental by id (with embedded details)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MongoRentalDetailed'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/genres:
    get:
      tags:
      - MongoDB
      summary: List MongoDB genres (lookup)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Genre'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/formats:
    get:
      tags:
      - MongoDB
      summary: List MongoDB formats (lookup)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Format'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/membership_types:
    get:
      tags:
      - MongoDB
      summary: List MongoDB membership types (lookup)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoMembershipType'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/fee_types:
    get:
      tags:
      - MongoDB
      summary: List MongoDB fee types (lookup)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoFeeType'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mongodb/promo_codes:
    get:
      tags:
      - MongoDB
      summary: List MongoDB promo codes (lookup)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoPromoCode'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/neo4j/health:
    get:
      tags:
      - Neo4j
      summary: Neo4j health
      responses:
        '200':
          description: OK
  /api/v1/mysql/customers:
    get:
      tags:
      - MySQL
      summary: List customers
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MySQL
      summary: Create customer (uses stored procedure)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerCreate'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mysql/customers/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get customer by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MySQL
      summary: Update customer (partial allowed)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
      - MySQL
      summary: Delete customer
      responses:
        '204':
          description: No Content
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mysql/genres:
    get:
      tags:
      - MySQL
      summary: List genres
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Genre'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MySQL
      summary: Create genre
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenreCreate'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/mysql/genres/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get genre by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update genre
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
      responses:
        '200':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete genre
      responses:
        '204':
          description: No Content
        '404':
          $ref: '#/components/responses/NotFound'
  /api/v1/mysql/movies:
    get:
      tags:
      - MySQL
      summary: List movies
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Movie'
    post:
      tags:
      - MySQL
      summary: Create movie
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MovieCreate'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
  /api/v1/mysql/movies/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get movie by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update movie
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete movie
      responses:
        '204':
          description: No Content
        '404':
          $ref: '#/components/responses/NotFound'
  /api/v1/mysql/employees:
    get:
      tags:
      - MySQL
      summary: List employees
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Employee'
    post:
      tags:
      - MySQL
      summary: Create employee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmployeeCreate'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
  /api/v1/mysql/employees/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get employee by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update employee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete employee
      responses:
        '204':
          description: No Content
        '404':
          $ref: '#/components/responses/NotFound'
  /api/v1/mysql/addresses:
    get:
      tags:
      - MySQL
      summary: List addresses
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create address
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Address'
      responses:
        '201':
          description: Created
  /api/v1/mysql/addresses/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get address
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update address
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete address
      responses:
        '204':
          description: No Content
  /api/v1/mysql/fees:
    get:
      tags:
      - MySQL
      summary: List fees
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create fee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Fee'
      responses:
        '201':
          description: Created
  /api/v1/mysql/fees/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get fee
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update fee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete fee
      responses:
        '204':
          description: No Content
  /api/v1/mysql/formats:
    get:
      tags:
      - MySQL
      summary: List formats
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create format
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Format'
      responses:
        '201':
          description: Created
  /api/v1/mysql/formats/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get format
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update format
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete format
      responses:
        '204':
          description: No Content
  /api/v1/mysql/locations:
    get:
      tags:
      - MySQL
      summary: List locations
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create location
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Location'
      responses:
        '201':
          description: Created
  /api/v1/mysql/locations/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get location
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update location
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete location
      responses:
        '204':
          description: No Content
  /api/v1/mysql/inventory_items:
    get:
      tags:
      - MySQL
      summary: List inventory items
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create inventory item
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventoryItem'
      responses:
        '201':
          description: Created
  /api/v1/mysql/inventory_items/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get inventory item
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update inventory item
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete inventory item
      responses:
        '204':
          description: No Content
  /api/v1/mysql/memberships:
    get:
      tags:
      - MySQL
      summary: List memberships
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create membership
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Membership'
      responses:
        '201':
          description: Created
  /api/v1/mysql/memberships/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get membership
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update membership
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete membership
      responses:
        '204':
          description: No Content
  /api/v1/mysql/membership_plans:
    get:
      tags:
      - MySQL
      summary: List membership plans
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create membership plan
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MembershipPlan'
      responses:
        '201':
          description: Created
  /api/v1/mysql/membership_plans/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get membership plan
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update membership plan
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete membership plan
      responses:
        '204':
          description: No Content
  /api/v1/mysql/promo_codes:
    get:
      tags:
      - MySQL
      summary: List promo codes
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create promo code
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromoCode'
      responses:
        '201':
          description: Created
  /api/v1/mysql/promo_codes/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get promo code
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update promo code
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete promo code
      responses:
        '204':
          description: No Content
  /api/v1/mysql/rentals:
    get:
      tags:
      - MySQL
      summary: List rentals
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create rental
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Rental'
      responses:
        '201':
          description: Created
  /api/v1/mysql/rentals/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get rental
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update rental
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete rental
      responses:
        '204':
          description: No Content
  /api/v1/mysql/payments:
    get:
      tags:
      - MySQL
      summary: List payments
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create payment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Payment'
      responses:
        '201':
          description: Created
  /api/v1/mysql/payments/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get payment
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update payment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete payment
      responses:
        '204':
          description: No Content
  /api/v1/mysql/reviews:
    get:
      tags:
      - MySQL
      summary: List reviews
      responses:
        '200':
          description: OK
    post:
      tags:
      - MySQL
      summary: Create review
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Review'
      responses:
        '201':
          description: Created
  /api/v1/mysql/reviews/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MySQL
      summary: Get review
      responses:
        '200':
          description: OK
    put:
      tags:
      - MySQL
      summary: Update review
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Updated
    delete:
      tags:
      - MySQL
      summary: Delete review
      responses:
        '204':
          description: No Content
components:
  parameters:
    IdParam:
      name: id
      in: path
      required: true
      schema:
        type: integer
  responses:
    BadRequest:
      description: Bad Request
    NotFound:
      description: Not Found
    ServerError:
      description: Internal Server Error
  schemas:
    Customer:
      type: object
      properties:
        id:
          type: integer
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        created_at:
          type: string
          format: date-time
    CustomerCreate:
      type: object
      required:
      - first_name
      - last_name
      - email
      - phone_number
      - address
      - city
      - post_code
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        address:
          type: string
        city:
          type: string
        post_code:
          type: string
    Genre:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
    GenreCreate:
      type: object
      required:
      - name
      properties:
        name:
          type: string
    Movie:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        release_year:
          type: integer
        runtime_min:
          type: integer
        rating:
          type: number
          format: float
        summary:
          type: string
    MovieCreate:
      type: object
      required:
      - title
      - release_year
      - runtime_min
      properties:
        title:
          type: string
        release_year:
          type: integer
        runtime_min:
          type: integer
        rating:
          type: number
          format: float
        summary:
          type: string
    Employee:
      type: object
      properties:
        id:
          type: integer
        first_name:
          type: string
        last_name:
          type: string
        phone_number:
          type: string
        email:
          type: string
          format: email
        is_active:
          type: boolean
    EmployeeCreate:
      type: object
      required:
      - first_name
      - last_name
      - phone_number
      - email
      properties:
        first_name:
          type: string
        last_name:
          type: string
        phone_number:
          type: string
        email:
          type: string
          format: email
        is_active:
          type: boolean
    Address:
      type: object
      properties:
        id:
          type: integer
        address:
          type: string
        city:
          type: string
        post_code:
          type: string
        customer_id:
          type: integer
    Fee:
      type: object
      properties:
        id:
          type: integer
        fee_type:
          type: string
          enum:
          - LATE
          - DAMAGED
          - OTHER
        amount_dkk:
          type: number
          format: float
    Format:
      type: object
      properties:
        id:
          type: integer
        format:
          type: string
          enum:
          - DVD
          - BLU-RAY
          - VHS
    Location:
      type: object
      properties:
        id:
          type: integer
        address:
          type: string
        city:
          type: string
    InventoryItem:
      type: object
      properties:
        id:
          type: integer
        location_id:
          type: integer
        format_id:
          type: integer
        movie_id:
          type: integer
        status:
          type: integer
    Membership:
      type: object
      properties:
        id:
          type: integer
        membership:
          type: string
          enum:
          - GOLD
          - SILVER
          - BRONZE
    MembershipPlan:
      type: object
      properties:
        id:
          type: integer
        monthly_cost:
          type: number
          format: float
        starts_on:
          type: string
          format: date-time
        ends_on:
          type: string
          format: date-time
        membership_id:
          type: integer
        customer_id:
          type: integer
    PromoCode:
      type: object
      properties:
        id:
          type: integer
        code:
          type: string
        description:
          type: string
        percent_off:
          type: number
          format: float
        amount_off_dkk:
          type: number
          format: float
        starts_at:
          type: string
          format: date-time
        ends_at:
          type: string
          format: date-time
    Rental:
      type: object
      properties:
        id:
          type: integer
        rented_at_datetime:
          type: string
          format: date-time
        returned_at_datetime:
          type: string
          format: date-time
        due_at_datetime:
          type: string
          format: date-time
        reserved_at_datetime:
          type: string
          format: date-time
        status:
          type: string
          enum:
          - RESERVED
          - OPEN
          - RETURNED
          - LATE
          - CANCELLED
        customer_id:
          type: integer
        promo_code_id:
          type: integer
          nullable: true
        employee_id:
          type: integer
          nullable: true
    Payment:
      type: object
      properties:
        id:
          type: integer
        amount_dkk:
          type: number
          format: float
        created_at:
          type: string
          format: date-time
        rental_id:
          type: integer
    Review:
      type: object
      properties:
        id:
          type: integer
        rating:
          type: integer
          minimum: 1
          maximum: 10
        body:
          type: string
        created_at:
          type: string
          format: date-time
        movie_id:
          type: integer
    MongoCustomerAddress:
      type: object
      properties:
        address_id:
          type: integer
        address:
          type: string
        city:
          type: string
        post_code:
          type: string
    MongoCustomerMembershipPlan:
      type: object
      properties:
        membership_plan_id:
          type: integer
        membership_type:
          type: string
          enum:
          - GOLD
          - SILVER
          - BRONZE
        starts_on:
          type: string
          format: date-time
        ends_on:
          type: string
          format: date-time
          nullable: true
        monthly_cost_dkk:
          type: number
        membership_id:
          type: integer
    MongoCustomerRecentRental:
      type: object
      properties:
        rental_id:
          type: integer
        status:
          type: string
          enum:
          - RESERVED
          - OPEN
          - RETURNED
          - LATE
          - CANCELLED
        rented_at_datetime:
          type: string
          format: date-time
    MongoCustomerDetailed:
      allOf:
      - $ref: '#/components/schemas/Customer'
      - type: object
        properties:
          address:
            $ref: '#/components/schemas/MongoCustomerAddress'
          membership_plan:
            $ref: '#/components/schemas/MongoCustomerMembershipPlan'
          recent_rentals:
            type: array
            items:
              $ref: '#/components/schemas/MongoCustomerRecentRental'
    MongoMovieReview:
      type: object
      properties:
        review_id:
          type: integer
        movie_id:
          type: integer
        rating:
          type: integer
          minimum: 1
          maximum: 10
        body:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        customer_id:
          type: integer
          nullable: true
    MongoMovieDetailed:
      allOf:
      - $ref: '#/components/schemas/Movie'
      - type: object
        properties:
          genres:
            type: array
            items:
              type: string
          reviews:
            type: array
            items:
              $ref: '#/components/schemas/MongoMovieReview'
    MongoLocationEmployee:
      type: object
      properties:
        employee_id:
          type: integer
        first_name:
          type: string
        last_name:
          type: string
        phone_number:
          type: string
          nullable: true
        email:
          type: string
        is_active:
          type: boolean
    MongoLocationInventoryItem:
      type: object
      properties:
        inventory_item_id:
          type: integer
        movie_id:
          type: integer
        format_id:
          type: integer
        status:
          type: string
          enum:
          - AVAILABLE
          - RENTED
          - DAMAGED
          - RETIRED
    MongoLocationDetailed:
      allOf:
      - $ref: '#/components/schemas/Location'
      - type: object
        properties:
          employees:
            type: array
            items:
              $ref: '#/components/schemas/MongoLocationEmployee'
          inventory:
            type: array
            items:
              $ref: '#/components/schemas/MongoLocationInventoryItem'
    MongoRentalItem:
      type: object
      properties:
        rental_item_id:
          type: integer
        inventory_item_id:
          type: integer
        movie_id:
          type: integer
        format_id:
          type: integer
    MongoRentalPayment:
      type: object
      properties:
        payment_id:
          type: integer
        amount_dkk:
          type: number
        created_at:
          type: string
          format: date-time
    MongoRentalFeeSnapshot:
      type: object
      properties:
        fee_type:
          type: string
          nullable: true
        default_amount_dkk:
          type: number
          nullable: true
    MongoRentalFee:
      type: object
      properties:
        rental_fee_id:
          type: integer
        fee_id:
          type: integer
        amount_dkk:
          type: number
        snapshot:
          $ref: '#/components/schemas/MongoRentalFeeSnapshot'
    MongoRentalPromoSnapshot:
      type: object
      properties:
        promo_code_id:
          type: integer
          nullable: true
        code:
          type: string
          nullable: true
        percent_off:
          type: number
          nullable: true
        amount_off_dkk:
          type: number
          nullable: true
        starts_at:
          type: string
          format: date-time
          nullable: true
        ends_at:
          type: string
          format: date-time
          nullable: true
    MongoRentalDetailed:
      allOf:
      - $ref: '#/components/schemas/Rental'
      - type: object
        properties:
          location_id:
            type: integer
          items:
            type: array
            items:
              $ref: '#/components/schemas/MongoRentalItem'
          payments:
            type: array
            items:
              $ref: '#/components/schemas/MongoRentalPayment'
          fees:
            type: array
            items:
              $ref: '#/components/schemas/MongoRentalFee'
          promo:
            $ref: '#/components/schemas/MongoRentalPromoSnapshot'
    MongoMembershipType:
      type: object
      properties:
        membership_id:
          type: integer
        type:
          type: string
          enum:
          - GOLD
          - SILVER
          - BRONZE
    MongoFeeType:
      type: object
      properties:
        fee_id:
          type: integer
        fee_type:
          type: string
          enum:
          - LATE
          - DAMAGED
          - OTHER
        default_amount_dkk:
          type: number
    MongoPromoCode:
      type: object
      properties:
        promo_code_id:
          type: integer
        code:
          type: string
        description:
          type: string
          nullable: true
        percent_off:
          type: number
          nullable: true
        amount_off_dkk:
          type: number
          nullable: true
        starts_at:
          type: string
          format: date-time
        ends_at:
          type: string
          format: date-time
