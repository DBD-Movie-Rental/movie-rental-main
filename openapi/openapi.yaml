openapi: 3.0.3
info:
  title: Movie Rental API (Polyglot Backends)
  version: 1.0.0
  description: 'Unified OpenAPI specification for the Movie Rental system. Exposes
    MySQL (CRUD + stored procedures), MongoDB (read models), and Neo4j (graph-related)
    endpoints.

    '
servers:
- url: /api/v1
tags:
- name: MySQL
  description: Endpoints backed by the MySQL database
- name: MongoDB
  description: Read-model and reporting endpoints backed by MongoDB
- name: Neo4j
  description: Graph-related endpoints backed by Neo4j
paths:
  /mysql/health:
    get:
      tags:
      - MySQL
      summary: MySQL health check
      responses:
        '200':
          description: OK
  /neo4j/health:
    get:
      tags:
      - Neo4j
      summary: Neo4j health check
      responses:
        '200':
          description: OK
  /auth/register:
    post:
      tags:
      - MySQL
      summary: Register API user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - username
              - password
              properties:
                username:
                  type: string
                password:
                  type: string
                role:
                  type: string
                  enum:
                  - ADMIN
                  - SUPERUSER
                  - USER
      responses:
        '201':
          description: User created
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          description: Conflict (username exists)
  /auth/login:
    post:
      tags:
      - MySQL
      summary: Login API user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - username
              - password
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Tokens issued
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                  refresh_token:
                    type: string
        '401':
          description: Invalid credentials
  /auth/refresh:
    post:
      tags:
      - MySQL
      summary: Refresh access token
      security:
      - bearerAuth: []
      responses:
        '200':
          description: New access token
        '401':
          description: Invalid / expired token
  /auth/logout:
    post:
      tags:
      - MySQL
      summary: Logout (revoke token)
      security:
      - bearerAuth: []
      responses:
        '200':
          description: Logged out
        '401':
          description: Invalid / expired token
  /mysql/customers:
    get:
      tags:
      - MySQL
      summary: List customers
      responses:
        '200':
          description: List of customers
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
    post:
      tags:
      - MySQL
      summary: Create customer (uses stored procedure)
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerCreate'
      responses:
        '201':
          description: Customer created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
  /mysql/customers/{id}:
    get:
      tags:
      - MySQL
      summary: Get customer by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Customer found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update customer
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Customer'
      responses:
        '200':
          description: Customer updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete customer
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Customer deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/genres:
    get:
      tags:
      - MySQL
      summary: List genres
      responses:
        '200':
          description: List of genres
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Genre'
    post:
      tags:
      - MySQL
      summary: Create genre
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Genre'
      responses:
        '201':
          description: Genre created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/genres/{id}:
    get:
      tags:
      - MySQL
      summary: Get genre by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Genre found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update genre
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Genre'
      responses:
        '200':
          description: Genre updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete genre
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Genre deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/movies:
    get:
      tags:
      - MySQL
      summary: List movies
      responses:
        '200':
          description: List of movies
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Movie'
    post:
      tags:
      - MySQL
      summary: Create movie
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Movie'
      responses:
        '201':
          description: Movie created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/movies/{id}:
    get:
      tags:
      - MySQL
      summary: Get movie by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Movie found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update movie
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Movie'
      responses:
        '200':
          description: Movie updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete movie
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Movie deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/employees:
    get:
      tags:
      - MySQL
      summary: List employees
      responses:
        '200':
          description: List of employees
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Employee'
    post:
      tags:
      - MySQL
      summary: Create employee
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Employee'
      responses:
        '201':
          description: Employee created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/employees/{id}:
    get:
      tags:
      - MySQL
      summary: Get employee by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Employee found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update employee
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Employee'
      responses:
        '200':
          description: Employee updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete employee
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Employee deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/addresses:
    get:
      tags:
      - MySQL
      summary: List addresses
      responses:
        '200':
          description: List of addresses
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Address'
    post:
      tags:
      - MySQL
      summary: Create address
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Address'
      responses:
        '201':
          description: Address created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/addresses/{id}:
    get:
      tags:
      - MySQL
      summary: Get address by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Address found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update address
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Address'
      responses:
        '200':
          description: Address updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete address
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Address deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/fees:
    get:
      tags:
      - MySQL
      summary: List fees
      responses:
        '200':
          description: List of fees
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Fee'
    post:
      tags:
      - MySQL
      summary: Create fee
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Fee'
      responses:
        '201':
          description: Fee created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Fee'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/fees/{id}:
    get:
      tags:
      - MySQL
      summary: Get fee by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Fee found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Fee'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update fee
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Fee'
      responses:
        '200':
          description: Fee updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Fee'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete fee
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Fee deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/formats:
    get:
      tags:
      - MySQL
      summary: List formats
      responses:
        '200':
          description: List of formats
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Format'
    post:
      tags:
      - MySQL
      summary: Create format
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Format'
      responses:
        '201':
          description: Format created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Format'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/formats/{id}:
    get:
      tags:
      - MySQL
      summary: Get format by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Format found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Format'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update format
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Format'
      responses:
        '200':
          description: Format updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Format'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete format
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Format deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/locations:
    get:
      tags:
      - MySQL
      summary: List locations
      responses:
        '200':
          description: List of locations
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Location'
    post:
      tags:
      - MySQL
      summary: Create location
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Location'
      responses:
        '201':
          description: Location created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/locations/{id}:
    get:
      tags:
      - MySQL
      summary: Get location by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Location found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update location
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Location'
      responses:
        '200':
          description: Location updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete location
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Location deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/inventory_items:
    get:
      tags:
      - MySQL
      summary: List inventory items
      responses:
        '200':
          description: List of inventory items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/InventoryItem'
    post:
      tags:
      - MySQL
      summary: Create inventory item
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventoryItem'
      responses:
        '201':
          description: Inventory item created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InventoryItem'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/inventory_items/{id}:
    get:
      tags:
      - MySQL
      summary: Get inventory item by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Inventory item found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InventoryItem'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update inventory item
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventoryItem'
      responses:
        '200':
          description: Inventory item updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InventoryItem'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete inventory item
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Inventory item deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/memberships:
    get:
      tags:
      - MySQL
      summary: List memberships
      responses:
        '200':
          description: List of memberships
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Membership'
    post:
      tags:
      - MySQL
      summary: Create membership
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Membership'
      responses:
        '201':
          description: Membership created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Membership'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/memberships/{id}:
    get:
      tags:
      - MySQL
      summary: Get membership by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Membership found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Membership'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update membership
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Membership'
      responses:
        '200':
          description: Membership updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Membership'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete membership
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Membership deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/membership_plans:
    get:
      tags:
      - MySQL
      summary: List membership plans
      responses:
        '200':
          description: List of membership plans
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MembershipPlan'
    post:
      tags:
      - MySQL
      summary: Create membership plan
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MembershipPlan'
      responses:
        '201':
          description: Membership plan created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipPlan'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/membership_plans/{id}:
    get:
      tags:
      - MySQL
      summary: Get membership plan by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Membership plan found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipPlan'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update membership plan
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MembershipPlan'
      responses:
        '200':
          description: Membership plan updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipPlan'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete membership plan
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Membership plan deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/promo_codes:
    get:
      tags:
      - MySQL
      summary: List promo codes
      responses:
        '200':
          description: List of promo codes
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PromoCode'
    post:
      tags:
      - MySQL
      summary: Create promo code
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromoCode'
      responses:
        '201':
          description: Promo code created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromoCode'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/promo_codes/{id}:
    get:
      tags:
      - MySQL
      summary: Get promo code by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Promo code found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromoCode'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update promo code
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromoCode'
      responses:
        '200':
          description: Promo code updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromoCode'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete promo code
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Promo code deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/rentals:
    get:
      tags:
      - MySQL
      summary: List rentals
      responses:
        '200':
          description: List of rentals
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Rental'
    post:
      tags:
      - MySQL
      summary: Create rental (uses stored procedure)
      description: 'Creates a rental using the MySQL stored procedure create_rental.
        Expects a list of inventory item IDs in the request body.

        '
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RentalCreate'
      responses:
        '201':
          description: Rental created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rental'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
  /mysql/rentals/{id}:
    get:
      tags:
      - MySQL
      summary: Get rental by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Rental found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rental'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update rental
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Rental'
      responses:
        '200':
          description: Rental updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rental'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete rental
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Rental deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/rentals/reservations:
    post:
      tags:
      - MySQL
      summary: Create rental reservation (uses stored procedure)
      description: 'Creates a rental with status=RESERVED using the create_reservation
        stored procedure. Inventory availability is validated in the database.

        '
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RentalCreate'
      responses:
        '201':
          description: Reservation created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rental'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
  /mysql/payments:
    get:
      tags:
      - MySQL
      summary: List payments
      responses:
        '200':
          description: List of payments
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'
    post:
      tags:
      - MySQL
      summary: Create payment
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentCreate'
      responses:
        '201':
          description: Payment created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/payments/{id}:
    get:
      tags:
      - MySQL
      summary: Get payment by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Payment found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update payment
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentUpdate'
      responses:
        '200':
          description: Payment updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete payment
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Payment deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/reviews:
    get:
      tags:
      - MySQL
      summary: List reviews
      responses:
        '200':
          description: List of reviews
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Review'
    post:
      tags:
      - MySQL
      summary: Create review
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Review'
      responses:
        '201':
          description: Review created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mysql/reviews/{id}:
    get:
      tags:
      - MySQL
      summary: Get review by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Review found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags:
      - MySQL
      summary: Update review
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Review'
      responses:
        '200':
          description: Review updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MySQL
      summary: Delete review
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Review deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mysql/audit/rentals:
    get:
      tags:
      - MySQL
      summary: List rental audit entries
      parameters:
      - name: rental_id
        in: query
        required: false
        schema:
          type: integer
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 100
      responses:
        '200':
          description: Rental audit entries
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RentalStatusAudit'
  /mysql/audit/payments:
    get:
      tags:
      - MySQL
      summary: List payment audit entries
      parameters:
      - name: payment_id
        in: query
        required: false
        schema:
          type: integer
      - name: rental_id
        in: query
        required: false
        schema:
          type: integer
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 100
      responses:
        '200':
          description: Payment audit entries
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PaymentAudit'
  /neo4j/movies/popular:
    get:
      tags:
      - Neo4j
      summary: Get popular movies from Neo4j
      description: 'Returns movies ranked by relationships and metrics stored in Neo4j
        (for example, most co-rented, highly connected, etc.).

        '
      responses:
        '200':
          description: List of popular movies
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Movie'
  /mongodb/health:
    get:
      tags:
      - MongoDB
      summary: MongoDB health
      responses:
        '200':
          description: OK
  /mongodb/customers:
    get:
      tags:
      - MongoDB
      summary: List customers (flat, MySQL-like shape)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create customer
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerCreate'
      responses:
        '201':
          description: Customer created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/customers/detailed:
    get:
      tags:
      - MongoDB
      summary: List customers with embedded address + membership + recent rentals
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoCustomerDetailed'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/customers/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get customer by id (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update customer
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Customer'
      responses:
        '200':
          description: Customer updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete customer
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Customer deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/customers/{id}/details:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get customer by id (with embedded details)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MongoCustomerDetailed'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/genres:
    get:
      tags:
      - MongoDB
      summary: List MongoDB genres (lookup)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Genre'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create genre
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Genre'
      responses:
        '201':
          description: Genre created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mongodb/genres/{id}:
    put:
      tags:
      - MongoDB
      summary: Update genre
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Genre'
      responses:
        '200':
          description: Genre updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete genre
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Genre deleted
        '404':
          $ref: '#/components/responses/NotFound'
    get:
      tags:
      - MongoDB
      summary: Get genre by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Genre found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/movies:
    get:
      tags:
      - MongoDB
      summary: List movies (flat, MySQL-like shape)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Movie'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create movie
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Movie'
      responses:
        '201':
          description: Movie created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mongodb/movies/detailed:
    get:
      tags:
      - MongoDB
      summary: List movies with embedded reviews + genres array
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoMovieDetailed'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/movies/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get movie by id (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update movie
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Movie'
      responses:
        '200':
          description: Movie updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Movie'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete movie
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Movie deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/movies/{id}/details:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get movie by id (with embedded details)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MongoMovieDetailed'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/employees:
    get:
      tags:
      - MongoDB
      summary: List employees (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Employee'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create employee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmployeeCreate'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/employees/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get employee by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update employee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Employee'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Employee'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
      - MongoDB
      summary: Delete employee
      responses:
        '204':
          description: Deleted
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/addresses:
    get:
      tags:
      - MongoDB
      summary: List addresses
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Address'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create address
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Address'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/addresses/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get address by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update address
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Address'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
      - MongoDB
      summary: Delete address
      responses:
        '204':
          description: Deleted
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/fees:
    post:
      tags:
      - MongoDB
      summary: Create fee
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Fee'
      responses:
        '201':
          description: Fee created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Fee'
        '400':
          $ref: '#/components/responses/BadRequest'
    get:
      tags:
      - MongoDB
      summary: List fees
      responses:
        '200':
          description: List of fees
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Fee'
  /mongodb/fees/{id}:
    put:
      tags:
      - MongoDB
      summary: Update fee
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Fee'
      responses:
        '200':
          description: Fee updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Fee'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete fee
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Fee deleted
        '404':
          $ref: '#/components/responses/NotFound'
    get:
      tags:
      - MongoDB
      summary: Get fee by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Fee found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Fee'
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/formats:
    get:
      tags:
      - MongoDB
      summary: List MongoDB formats (lookup)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Format'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create format
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Format'
      responses:
        '201':
          description: Format created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Format'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mongodb/formats/{id}:
    put:
      tags:
      - MongoDB
      summary: Update format
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Format'
      responses:
        '200':
          description: Format updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Format'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete format
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Format deleted
        '404':
          $ref: '#/components/responses/NotFound'
    get:
      tags:
      - MongoDB
      summary: Get format by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Format found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Format'
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/locations:
    get:
      tags:
      - MongoDB
      summary: List locations (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Location'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create location
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Location'
      responses:
        '201':
          description: Location created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mongodb/locations/detailed:
    get:
      tags:
      - MongoDB
      summary: List locations with embedded employees + inventory items
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoLocationDetailed'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/locations/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get location by id (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update location
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Location'
      responses:
        '200':
          description: Location updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete location
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Location deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/locations/{id}/details:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get location by id (with embedded employees + inventory)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MongoLocationDetailed'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/inventory_items:
    get:
      tags:
      - MongoDB
      summary: List inventory items
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/InventoryItem'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create inventory item
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventoryItem'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InventoryItem'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/inventory_items/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get inventory item by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InventoryItem'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update inventory item
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventoryItem'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InventoryItem'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
      - MongoDB
      summary: Delete inventory item
      responses:
        '204':
          description: Deleted
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/memberships:
    post:
      tags:
      - MongoDB
      summary: Create membership
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Membership'
      responses:
        '201':
          description: Membership created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Membership'
        '400':
          $ref: '#/components/responses/BadRequest'
    get:
      tags:
      - MongoDB
      summary: List memberships
      responses:
        '200':
          description: List of memberships
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Membership'
  /mongodb/memberships/{id}:
    put:
      tags:
      - MongoDB
      summary: Update membership
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Membership'
      responses:
        '200':
          description: Membership updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Membership'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete membership
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Membership deleted
        '404':
          $ref: '#/components/responses/NotFound'
    get:
      tags:
      - MongoDB
      summary: Get membership by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Membership found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Membership'
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/membership_plans:
    get:
      tags:
      - MongoDB
      summary: List membership plans
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MembershipPlan'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create membership plan
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MembershipPlan'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipPlan'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/membership_plans/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get membership plan by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipPlan'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update membership plan
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MembershipPlan'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MembershipPlan'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
      - MongoDB
      summary: Delete membership plan
      responses:
        '204':
          description: Deleted
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/promo_codes:
    get:
      tags:
      - MongoDB
      summary: List MongoDB promo codes (lookup)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoPromoCode'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create promo code
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromoCode'
      responses:
        '201':
          description: Promo code created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromoCode'
        '400':
          $ref: '#/components/responses/BadRequest'
  /mongodb/promo_codes/{id}:
    put:
      tags:
      - MongoDB
      summary: Update promo code
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromoCode'
      responses:
        '200':
          description: Promo code updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromoCode'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete promo code
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Promo code deleted
        '404':
          $ref: '#/components/responses/NotFound'
    get:
      tags:
      - MongoDB
      summary: Get promo code by ID
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: Promo code found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PromoCode'
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/rentals:
    get:
      tags:
      - MongoDB
      summary: List rentals (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Rental'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create rental
      description: 'Creates a rental using the MongoDB stored procedure create_rental.
        Expects a list of inventory item IDs in the request body.

        '
      security:
      - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RentalCreate'
      responses:
        '201':
          description: Rental created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rental'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/rentals/detailed:
    get:
      tags:
      - MongoDB
      summary: List rentals with items, payments, fees and promo snapshot
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MongoRentalDetailed'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/rentals/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get rental by id (flat)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rental'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update rental
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Rental'
      responses:
        '200':
          description: Rental updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rental'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
      - MongoDB
      summary: Delete rental
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: Rental deleted
        '404':
          $ref: '#/components/responses/NotFound'
  /mongodb/rentals/{id}/details:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get rental by id (with embedded details)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MongoRentalDetailed'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/payments:
    get:
      tags:
      - MongoDB
      summary: List payments
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create payment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Payment'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/payments/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get payment by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update payment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Payment'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
      - MongoDB
      summary: Delete payment
      responses:
        '204':
          description: Deleted
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/reviews:
    get:
      tags:
      - MongoDB
      summary: List reviews
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Review'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - MongoDB
      summary: Create review
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Review'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '500':
          $ref: '#/components/responses/ServerError'
  /mongodb/reviews/{id}:
    parameters:
    - $ref: '#/components/parameters/IdParam'
    get:
      tags:
      - MongoDB
      summary: Get review by id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - MongoDB
      summary: Update review
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Review'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
      - MongoDB
      summary: Delete review
      responses:
        '204':
          description: Deleted
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
components:
  parameters:
    IdParam:
      name: id
      in: path
      required: true
      schema:
        type: integer
  responses:
    BadRequest:
      description: Bad request
    NotFound:
      description: Resource not found
    ServerError:
      description: Internal server error
  schemas:
    Address:
      type: object
      properties:
        id:
          type: integer
        address:
          type: string
        city:
          type: string
        post_code:
          type: string
        customer_id:
          type: integer
    Customer:
      type: object
      properties:
        id:
          type: integer
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
        phone_number:
          type: string
        created_at:
          type: string
          format: date-time
    CustomerCreate:
      type: object
      required:
      - first_name
      - last_name
      - email
      - phone_number
      - address
      - city
      - post_code
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        address:
          type: string
        city:
          type: string
        post_code:
          type: string
    Genre:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
    Movie:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        release_year:
          type: integer
        runtime_min:
          type: integer
        rating:
          type: number
          format: float
          nullable: true
        summary:
          type: string
          nullable: true
    Employee:
      type: object
      properties:
        id:
          type: integer
        first_name:
          type: string
        last_name:
          type: string
        phone_number:
          type: string
        email:
          type: string
        is_active:
          type: boolean
    Fee:
      type: object
      properties:
        id:
          type: integer
        fee_type:
          type: string
          enum:
          - LATE
          - DAMAGED
          - OTHER
        amount_dkk:
          type: number
          format: float
    Format:
      type: object
      properties:
        id:
          type: integer
        format:
          type: string
          enum:
          - DVD
          - BLU-RAY
          - VHS
    Location:
      type: object
      properties:
        id:
          type: integer
        address:
          type: string
        city:
          type: string
    InventoryItem:
      type: object
      properties:
        id:
          type: integer
        location_id:
          type: integer
        format_id:
          type: integer
        movie_id:
          type: integer
        status:
          type: integer
          description: 1 = available, 0 = unavailable
    Membership:
      type: object
      properties:
        id:
          type: integer
        membership:
          type: string
          enum:
          - GOLD
          - SILVER
          - BRONZE
    MembershipPlan:
      type: object
      properties:
        id:
          type: integer
        monthly_cost:
          type: number
          format: float
        starts_on:
          type: string
          format: date-time
        ends_on:
          type: string
          format: date-time
        membership_id:
          type: integer
        customer_id:
          type: integer
    PromoCode:
      type: object
      properties:
        id:
          type: integer
        code:
          type: string
        description:
          type: string
        percent_off:
          type: number
          format: float
        amount_off_dkk:
          type: number
          format: float
        starts_at:
          type: string
          format: date-time
        ends_at:
          type: string
          format: date-time
    Rental:
      type: object
      properties:
        id:
          type: integer
        rented_at_datetime:
          type: string
          format: date-time
          nullable: true
        returned_at_datetime:
          type: string
          format: date-time
          nullable: true
        due_at_datetime:
          type: string
          format: date-time
          nullable: true
        reserved_at_datetime:
          type: string
          format: date-time
          nullable: true
        status:
          type: string
          enum:
          - RESERVED
          - OPEN
          - RETURNED
          - LATE
          - CANCELLED
        customer_id:
          type: integer
        employee_id:
          type: integer
          nullable: true
        promo_code_id:
          type: integer
          nullable: true
    RentalCreate:
      type: object
      required:
      - customer_id
      - inventory_item_ids
      properties:
        customer_id:
          type: integer
          description: ID of the customer renting or reserving.
        employee_id:
          type: integer
          nullable: true
          description: Optional employee handling the rental.
        promo_code_id:
          type: integer
          nullable: true
          description: Optional promo code applied to the rental.
        inventory_item_ids:
          type: array
          description: List of inventory_item IDs included in this rental/reservation.
          items:
            type: integer
    Payment:
      type: object
      properties:
        id:
          type: integer
        rental_id:
          type: integer
        amount_dkk:
          type: number
          format: float
        created_at:
          type: string
          format: date-time
    PaymentCreate:
      type: object
      required:
      - rental_id
      - amount_dkk
      properties:
        rental_id:
          type: integer
        amount_dkk:
          type: number
          format: float
    PaymentUpdate:
      type: object
      properties:
        amount_dkk:
          type: number
          format: float
    Review:
      type: object
      properties:
        id:
          type: integer
        rating:
          type: integer
        body:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        movie_id:
          type: integer
    MongoRentalDetailed:
      allOf:
      - $ref: '#/components/schemas/Rental'
      - type: object
        properties:
          location_id:
            type: integer
          items:
            type: array
            items:
              $ref: '#/components/schemas/MongoRentalItem'
          payments:
            type: array
            items:
              $ref: '#/components/schemas/MongoRentalPayment'
          fees:
            type: array
            items:
              $ref: '#/components/schemas/MongoRentalFee'
          promo:
            $ref: '#/components/schemas/MongoRentalPromoSnapshot'
    MongoCustomerDetailed:
      allOf:
      - $ref: '#/components/schemas/Customer'
      - type: object
        properties:
          address:
            $ref: '#/components/schemas/MongoCustomerAddress'
          membership_plan:
            $ref: '#/components/schemas/MongoCustomerMembershipPlan'
          recent_rentals:
            type: array
            items:
              $ref: '#/components/schemas/MongoCustomerRecentRental'
    RentalStatusAudit:
      type: object
      properties:
        audit_id:
          type: integer
        rental_id:
          type: integer
        action:
          type: string
          enum:
          - INSERT
          - UPDATE
          - DELETE
        old_status:
          type: string
          nullable: true
        new_status:
          type: string
          nullable: true
        old_rented_at_datetime:
          type: string
          format: date-time
          nullable: true
        new_rented_at_datetime:
          type: string
          format: date-time
          nullable: true
        old_due_at_datetime:
          type: string
          format: date-time
          nullable: true
        new_due_at_datetime:
          type: string
          format: date-time
          nullable: true
        old_returned_at_datetime:
          type: string
          format: date-time
          nullable: true
        new_returned_at_datetime:
          type: string
          format: date-time
          nullable: true
        changed_by:
          type: string
        changed_at:
          type: string
          format: date-time
    PaymentAudit:
      type: object
      properties:
        audit_id:
          type: integer
        payment_id:
          type: integer
          nullable: true
        rental_id:
          type: integer
          nullable: true
        action:
          type: string
          enum:
          - INSERT
          - UPDATE
          - DELETE
          - REFUND
        old_amount_dkk:
          type: number
          format: float
          nullable: true
        new_amount_dkk:
          type: number
          format: float
          nullable: true
        changed_by:
          type: string
        changed_at:
          type: string
          format: date-time
    GenreCreate:
      type: object
      required:
      - name
      properties:
        name:
          type: string
    MovieCreate:
      type: object
      required:
      - title
      - release_year
      - runtime_min
      properties:
        title:
          type: string
        release_year:
          type: integer
        runtime_min:
          type: integer
        rating:
          type: number
          format: float
        summary:
          type: string
    EmployeeCreate:
      type: object
      required:
      - first_name
      - last_name
      - phone_number
      - email
      properties:
        first_name:
          type: string
        last_name:
          type: string
        phone_number:
          type: string
        email:
          type: string
          format: email
        is_active:
          type: boolean
    MongoCustomerAddress:
      type: object
      properties:
        address_id:
          type: integer
        address:
          type: string
        city:
          type: string
        post_code:
          type: string
    MongoCustomerMembershipPlan:
      type: object
      properties:
        membership_plan_id:
          type: integer
        membership_type:
          type: string
          enum:
          - GOLD
          - SILVER
          - BRONZE
        starts_on:
          type: string
          format: date-time
        ends_on:
          type: string
          format: date-time
          nullable: true
        monthly_cost_dkk:
          type: number
        membership_id:
          type: integer
    MongoCustomerRecentRental:
      type: object
      properties:
        rental_id:
          type: integer
        status:
          type: string
          enum:
          - RESERVED
          - OPEN
          - RETURNED
          - LATE
          - CANCELLED
        rented_at_datetime:
          type: string
          format: date-time
    MongoMovieReview:
      type: object
      properties:
        review_id:
          type: integer
        movie_id:
          type: integer
        rating:
          type: integer
          minimum: 1
          maximum: 10
        body:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        customer_id:
          type: integer
          nullable: true
    MongoMovieDetailed:
      allOf:
      - $ref: '#/components/schemas/Movie'
      - type: object
        properties:
          genres:
            type: array
            items:
              type: string
          reviews:
            type: array
            items:
              $ref: '#/components/schemas/MongoMovieReview'
    MongoLocationEmployee:
      type: object
      properties:
        employee_id:
          type: integer
        first_name:
          type: string
        last_name:
          type: string
        phone_number:
          type: string
          nullable: true
        email:
          type: string
        is_active:
          type: boolean
    MongoLocationInventoryItem:
      type: object
      properties:
        inventory_item_id:
          type: integer
        movie_id:
          type: integer
        format_id:
          type: integer
        status:
          type: string
          enum:
          - AVAILABLE
          - RENTED
          - DAMAGED
          - RETIRED
    MongoLocationDetailed:
      allOf:
      - $ref: '#/components/schemas/Location'
      - type: object
        properties:
          employees:
            type: array
            items:
              $ref: '#/components/schemas/MongoLocationEmployee'
          inventory:
            type: array
            items:
              $ref: '#/components/schemas/MongoLocationInventoryItem'
    MongoRentalItem:
      type: object
      properties:
        rental_item_id:
          type: integer
        inventory_item_id:
          type: integer
        movie_id:
          type: integer
        format_id:
          type: integer
    MongoRentalPayment:
      type: object
      properties:
        payment_id:
          type: integer
        amount_dkk:
          type: number
        created_at:
          type: string
          format: date-time
    MongoRentalFeeSnapshot:
      type: object
      properties:
        fee_type:
          type: string
          nullable: true
        default_amount_dkk:
          type: number
          nullable: true
    MongoRentalFee:
      type: object
      properties:
        rental_fee_id:
          type: integer
        fee_id:
          type: integer
        amount_dkk:
          type: number
        snapshot:
          $ref: '#/components/schemas/MongoRentalFeeSnapshot'
    MongoRentalPromoSnapshot:
      type: object
      properties:
        promo_code_id:
          type: integer
          nullable: true
        code:
          type: string
          nullable: true
        percent_off:
          type: number
          nullable: true
        amount_off_dkk:
          type: number
          nullable: true
        starts_at:
          type: string
          format: date-time
          nullable: true
        ends_at:
          type: string
          format: date-time
          nullable: true
    MongoMembershipType:
      type: object
      properties:
        membership_id:
          type: integer
        type:
          type: string
          enum:
          - GOLD
          - SILVER
          - BRONZE
    MongoFeeType:
      type: object
      properties:
        fee_id:
          type: integer
        fee_type:
          type: string
          enum:
          - LATE
          - DAMAGED
          - OTHER
        default_amount_dkk:
          type: number
    MongoPromoCode:
      type: object
      properties:
        promo_code_id:
          type: integer
        code:
          type: string
        description:
          type: string
          nullable: true
        percent_off:
          type: number
          nullable: true
        amount_off_dkk:
          type: number
          nullable: true
        starts_at:
          type: string
          format: date-time
        ends_at:
          type: string
          format: date-time
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
